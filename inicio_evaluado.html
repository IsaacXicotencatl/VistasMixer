<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
      <link  rel="stylesheet" href="css/style.css" />
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">

      <title>Mixer</title>
   </head>
   <body>
      <div class="aviso">
           <div class="mensaje-responsivo">
                <span><h3>Para una mejor experiencia de usuario le recomendamos poner su dispositivo en forma horizontal</h3>  </br>
        <h6>Si sigue viendo este mensaje después de girar el dispositivo, le recomendamos colocar el zoom de su navegador en 100%</h6></span>
                <img class="img-fluid" src="img/rotate-phone.gif">
           </div>
      </div>

      <div class="container content-all cont-mixer">
           <header class="encabezado-potentor">
               <div class="row">
                  <div class="col-md-2 col-4 logo-potentor">
                     <img class="img-fluid" src="img/talentco_logo.png">
                  </div>
                  <div class="col-md-10 col-8"></div>                  
               </div>
           </header>

           <div>
                <div class="row">
                  <div class="col-md-8 col-8 intro-potentor">
                       <div>
                           <h5>¡Hola <b>Andrea</b>, Bienvenido@ a Potentor!</h5>
                           <span>
                               A continuación encontrarás las pruebas psicométricas que tienes asignadas.</br>
                               Cuando estés listo, da clic en iniciar. Recuerda leer las instrucciones y tomar el tiempo para responder en un lugar tranquilo y en silencio.
                           </span>
                       </div>
                  </div>
                  <div class="col-md-4 col-4 left-info">
                       
                       <div class="carga-img">
                            <span id="saludo">
                                 <input type="file" id="file" accept="image/*" onchange="mostrar()"/>
                                 <label for="file" class="circle" style="background-image: url(img/sube_selfie.png)"></label>
                            </span>
                            <div class="cont-up-down">
                                 <span id="up-self"><?php echo lang('_PSPRT_UP_SELF_');?></span>
                                 <span id="down-self" title="quitar foto" onclick="quitarSelfie()"><b>X</b></span>
                            </div>
                            <div id="cont-perfil">
                                 <img class="img-fluid"  id="img"/>
                            </div>                    
                       </div>

                       <div class="avance-gral">
                            <div class="progressArc" id="arco" data-value = "75">
                                 <div></div>
                                 <svg><path fill="none" stroke="#695de8" stroke-width="20"/></svg> 
                            </div>
                       </div>
                  </div>                  
                </div>


                <div class="row cuadricula">
                     <div class="cuadricula-info">
                          <div class="cuadri-contenido">
                               <div class="txt-info">
                                  <p class="clasi-prueba">Habilidades Intelectuales</p>
                                  <p class="titulo-prueba">Valores</p>
                               </div>
                               <div class="avance-prueba">
                                    <div class="progressArc" id="arco2" data-value = "40">
                                         <div></div>
                                         <svg><path fill="none" stroke="#695de8" stroke-width="20"/></svg> 
                                    </div>
                               </div>
                          </div>
                          <div class="row timer">
                               <div class="col-md-3">
                                   <span class="timer-time">
                                       <i class="far fa-clock"></i>
                                       <p> 15min</p>
                                   </span>
                               </div>
                               <div class="col-md-6"></div>
                               <div class="col-md-3">
                                  <span class="nom-ejercicios">2 de 5</span>
                               </div>
                          </div>
                          <div class="estatus">
                               <a><i class="fas fa-play"></i> Iniciar</a>
                          </div>
                     </div>
                     <div class="cuadricula-info">
                          <div class="cuadri-contenido">
                               <div class="txt-info">
                                  <p class="clasi-prueba">Valores de Integridad</p>
                                  <p class="titulo-prueba">Valores de Integridad</p>
                               </div>
                               <div class="avance-prueba">
                                    <div class="progressArc" id="arco3" data-value = "100">
                                         <div></div>
                                         <svg><path fill="none" stroke="#695de8" stroke-width="20"/></svg> 
                                    </div>
                               </div>
                          </div>
                          <div class="row timer">
                               <div class="col-md-3">
                                   <span class="timer-time">
                                       <i class="far fa-clock"></i>
                                       <p> 15min</p>
                                   </span>
                               </div>
                               <div class="col-md-6"></div>
                               <div class="col-md-3">
                                  <span class="nom-ejercicios"></span>
                               </div>
                          </div>
                          <div class="estatuscheck">
                               <a><i class="fas fa-check"></i> Terminado</a>
                          </div>
                     </div>
                     <div class="cuadricula-info empty"></div>
                     <div class="cuadricula-info empty"></div>
                     <div class="cuadricula-info">
                          <div class="cuadri-contenido">
                               <div class="txt-info">
                                  <p class="clasi-prueba">Valores de Integridad</p>
                                  <p class="titulo-prueba">Valores de Integridad</p>
                               </div>
                               <div class="avance-prueba">
                                    <div class="progressArc" id="arco4" data-value = "100">
                                         <div></div>
                                         <svg><path fill="none" stroke="#695de8" stroke-width="20"/></svg> 
                                    </div>
                               </div>
                          </div>
                          <div class="row timer">
                               <div class="col-md-3">
                                   <span class="timer-time">
                                       <i class="far fa-clock"></i>
                                       <p> 15min</p>
                                   </span>
                               </div>
                               <div class="col-md-6"></div>
                               <div class="col-md-3">
                                  <span class="nom-ejercicios"></span>
                               </div>
                          </div>
                          <div class="estatuscheck">
                               <a><i class="fas fa-check"></i> Terminado</a>
                          </div>
                     </div>
                </div>
                <div class="row cuadricula"></div>
           </div>
          
       
           <footer>
            <div class="row-footer">
               <div class="vacio-footer"></div>
               <div class="potentor-tip"> 
                    <div class="tip-icon">
                        <i class='far fa-lightbulb fa-3x' ></i>
                    </div>
                    <div class="pro-tip">
                         <b>Potentor Tip</b>
                         <p>Puedes aplicar las pruebas psicométricas en el orden que quieras.</br>
                         Te recomendamos aplicar las pruebas intelectuales primero.</p>
                    </div>
               </div>
               
            </div>
           </footer>
      </div>

      <script type="text/javascript">
          function mostrar(){
             var archivo = document.getElementById("file").files[0];
             var reader = new FileReader();
             if (file) {
               reader.readAsDataURL(archivo );
               reader.onloadend = function () {
                 document.getElementById("img").src = reader.result;
                 document.getElementById("cont-perfil").style.display = "block";
                 document.getElementById("saludo").style.display = "none";
                 document.getElementById("up-self").style.display = "none";
                 // document.getElementById("down-self").style.display = "block";
           
               }
             }
           }
      </script>


      <script>
         var source = 'http://localhost/mixer_app/mixer/checkAvance';
         
         $.ajax({
             url: source,
             data: {
                 usuario: '2535804',
                 avance: '5.6179775280899',
                 credito: '35',
                 grado: '14',
                 id_configuracion: '56'
         
             },
             type: "POST",
             success: function() {
         
             }
         });
      </script>
      <script type="text/javascript">
         /*Progress bar con forma de arco o sector circular*/
         /*Convertir polares (radio, ángulo) a cartesianas (x, y)*/ 
         function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
         var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;
         return {
         x: centerX + (radius * Math.cos(angleInRadians)),
         y: centerY + (radius * Math.sin(angleInRadians))
         };
         }
         /*Consturir el path del arco*/ 
         function describeArc(x, y, radius, startAngle, endAngle){
         var start = polarToCartesian(x, y, radius, endAngle);
         var end = polarToCartesian(x, y, radius, startAngle);
         var largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
         var d = [
         "M", start.x, start.y, 
         "A", radius, radius, 0, largeArcFlag, 0, end.x, end.y
         ].join(" ");
         return d; 
         }
         /*Clase para un arco, los datos se obtienen del elemento del DOM con id = ident */
         class ProgressArc{
         constructor(ident){
         let container = document.getElementById(ident);
         this.end = parseInt(container.dataset.value);
         this.end = (this.end > 100)?100:this.end;
         this.radio = parseInt(window.getComputedStyle(container).height)/2;
         this.text = container.getElementsByTagName('div')[0];
         this.arc = container.getElementsByTagName('svg')[0];
         this.actual = 0
         this.arc.style.height = this.radio*2+'px';
         }
         /*Animación */
         play(){
         this.timer = setInterval(this.draw.bind(this), 25) 
         }
         /*Dibuja el arco*/
         draw(){
         let path = this.arc.children[0]
         let angle = 0;
         this.actual++;
         angle = this.actual*3.599;
         if (this.actual >= this.end){
         clearInterval(this.timer)
         path.setAttribute("d", describeArc(this.radio, this.radio, this.radio, 0, angle));
         }
         else
         path.setAttribute("d", describeArc(this.radio, this.radio, this.radio, 0, angle));
         this.text.innerText = this.actual+"%";
         }
         } 
         /*Crear los objetos para cada progressArc de la página*/ 
         window.onload = function() {
         var arco = new ProgressArc('arco');
         arco.play();

         var arco2 = new ProgressArc('arco2');
         arco2.play();

         var arco3 = new ProgressArc('arco3');
         arco3.play();

         var arco4 = new ProgressArc('arco4');
         arco4.play();
         }


      </script>
   </body>
</html>
